<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <script>
        const choices = ["rock", "paper", "scissors"]

        function getComputerChoice(){
            let computerChoice = choices[Math.floor(Math.random()*choices.length)]
            console.log("Computer choice is: " + computerChoice)
            return computerChoice

        }

        function playRound(playerChoice, computerChoice){
            const outcomes = {
                rock: {paper: "lose", scissors: "win"},
                paper: {rock: "win", scissors: "lose"},
                scissors: {rock: "lose", paper: "win"}
            }

            if(playerChoice == computerChoice){
                console.log("The result is a TIE")
                return 0
            } else{
                console.log(`Player ${outcomes[playerChoice][computerChoice]} against computer `);
                if(outcomes[playerChoice][computerChoice] == "win") return 1
                else if(outcomes[playerChoice][computerChoice] == "lose") return -1
                else console.log("an error occured when deciding winner")
            }
        }

        function getPlayerChoice(){
            let choice 
            while(choice==null){

                check = prompt("choose 'rock' 'paper' or 'scissors':")
                if(check.toLowerCase() === "rock" || check.toLowerCase() === "paper" || check.toLowerCase() === "scissors"){
                    choice = check.toLowerCase()
                    console.log(`Player choice is ${choice}`)
                } else console.log("ERROR: please check spelling")
                

            }
            
            return choice
        }

        function game(){
            let playerWins=0,computerWins=0,ties=0

            for(let i=0;i<5;i++){
                let result = playRound(getPlayerChoice(), getComputerChoice())
                switch(result){
                    case 1:
                        playerWins++
                        break;
                    case 0:
                        ties++
                        break;
                    case -1:
                        computerWins++
                        break;
                }
            }

            console.log(`Player won ${playerWins} times while computer won ${computerWins} times out of 5 rounds`)
            if(playerWins>computerWins) console.log("Player wins!")
            else if(playerWins<computerWins) console.log("Computer wins")
            else console.log("It is a Tie")
        }

        game()
    </script>
    
</body>
</html>